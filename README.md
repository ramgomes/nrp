# NRP Solver

The Nurse Rostering Problem (NRP) is an optimization problem where nurses with specific skills must be assigned shifts in a schedule. The objective is to obtain a feasible solution while minimizing the number of soft constraint violations. This code presents a Variable Neighborhood Search accelerated Column Generation procedure for the NRP in addition to a Relax-and-fix Heuristic for obtaining feasible solutions.

The java code and the instances shared on this repository allow to solve the nurse scheduling  problem described in the second international nurse rostering competition (INRC-II). 
Every information about INRC-II can be found on their website http://mobiz.vives.be/inrc2/, and the initial description of the problem is given in:

[1] S. Ceschia, N. Thi, T. Dang, and P. De Causmaecker, "Second International Nurse Rostering Competition (INRC-II): Problem Description and Rules." p. 1–18, 2015.

The methods implemented in this code are all described in the following work.  Please cite this reference in any use of our code.
[2] R. Gomes, T. Toffolo and H. Santos, "Variable neighborhood search accelerated column generation for the nurse rostering problem", p. 31-38, 2017, Electronic Notes in Discrete Mathematics.

These two references can also be found in the directory ./references.

## Nurse Rostering Problem Solver

Written by Rafael Gomes, Túlio Toffolo and Haroldo Santos.

(C) Copyright 2018, by Group of Optimization and Algorithms - GOAL, Federal University of Ouro Preto. All rights reserved. 
More information: <a href="http://goal.ufop.br/nrp2/" target="_blank">http://goal.ufop.br/nrp2/</a>

Please address all contributions, suggestions, and inquiries to the current project administrator.

## Usage examples:

Column geration approach:

```
Usage: java -jar inrc2.jar <scenario> <weekdata> <history> <solution> [options]
    <scenario>      : Scenario file (example: Sc-n030w4.xml).
    <weekdata>      : Week-data file (example: WD-n030w4-0.xml).
    <history>       : History file  (example: H0-n030w4-0.xml).
    <out>           : Output folder (default: -out out/).
    <timeout>       : Time limit, in seconds (example: -timeout 3600).
    <maxIter>       : Maximum iteration without improvement (default: -maxIter 10).
    <eliteSet>      : Elite set size (default: -eliteSet 10).
    <shakePerc>     : Percentage changes in shake (default: -shakePerc 0.9).
    <minCols>       : Percentage minimum of mandatory columns generated by heuristics (default: -minCols 0.35).
    <minRoundDown>  : rounding threshold down in Relax-and-Fix (default: -minRoundDown -1).

Options:
    -initSol        : Solution Files for horizon, in XML format.
    -solver         : 0 = cplex (default) / 1 = gurobi
    -nThreads       : 0 = Sequential mode (default) / number of threads available
    -onlyRelax      : true / false (default)
    -bestKnow       : Best know value for instance.

Examples:
    java -Djava.library.path=/opt/CPLEX_Studio1271/cplex/bin/x86-64_linux/ -jar inrc2.jar data/n110w8/Sc-n110w8.xml data/n110w8/WD-n110w8-8.xml data/n110w8/WD-n110w8-8.xml data/n110w8/WD-n110w8-2.xml data/n110w8/WD-n110w8-2.xml data/n110w8/WD-n110w8-3.xml data/n110w8/WD-n110w8-2.xml data/n110w8/WD-n110w8-0.xml data/n110w8/WD-n110w8-8.xml data/n110w8/H0-n110w8-0.xml -out out/ -onlyRelax false -timeout 300000 -solver 0
```

The validator can then be run by:

```
Usage: 
    java -jar validator.jar --sce data/n035w4/Sc-n035w4.xml --his data/n035w4/H0-n035w4-0.xml --weeks data/n035w4/WD-n035w4-1.xml data/n035w4/WD-n035w4-7.xml data/n035w4/WD-n035w4-1.xml data/n035w4/WD-n035w4-8.xml --sols out/n035w4_0_1-7-1-8/sol-week0.xml out/n035w4_0_1-7-1-8/sol-week1.xml out/n035w4_0_1-7-1-8/sol-week2.xml out/n035w4_0_1-7-1-8/sol-week3.xml > out/n035w4_0_1-7-1-8/validator.txt

```


## Requirements

Java 1.8 is required.
The decomposition-based heuristic requires cplex or gurobi. Make sure either cplex.jar or gurobi.jar is on your classpath before executing the code.

## Questions?

If you have any questions, please feel free to contact us.
For additional information, we would like to direct you to http://goal.ufop.br/nrp2/

Thanks!

